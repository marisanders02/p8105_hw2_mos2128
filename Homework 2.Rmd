---
title: "Homework 2"
author: "Mari Sanders"
output: github_document
---
```{r message=FALSE, }
library(tidyverse)
library(readxl)
```

# Problem 1 

```{r}
transit_df <- read_csv("data_hw2/nyc_subway_data.csv") %>% 
  janitor::clean_names() %>% 
  select(
    -c("division", "entrance_type", "exit_only", "staffing", "staff_hours",
       "ada_notes", "free_crossover", "north_south_street", "east_west_street", 
       "corner", "entrance_latitude", "entrance_longitude", "station_location", 
       "entrance_location")
  ) %>% 
  mutate(
    entry = case_match(
      entry, 
      "YES" ~ TRUE, 
      "NO" ~ FALSE
    )
  ) 
```

The data contains the variables,`r names(transit_df)` To clean the data, I started by using the `clean_names()` function from the `janitor` package. Then I selected only the rows that were needed for the analysis by using `select()`. Next, I changed the entry variable to a logical variable instead of a character variable. This is fairly tidy, except the routes that each station serve it a bit hard to understand. This cleaned data contains `r nrow(transit_df)` rows and `r ncol(transit_df)` columns. 

```{r}
distinct_station <- 
  transit_df %>%
  distinct(line, station_name) %>%
  nrow()
```

There are `r distinct_station` distinct stations in this dataset. 

```{r}
ada_compliant <- transit_df %>% 
  filter(ada == "TRUE") %>% 
  distinct(line, station_name) %>% 
  nrow()
```

There are ` r ada_compliant` stations. 

```{r}
clean_transit <- transit_df %>% 
  mutate(
    across(starts_with("route"), 
           as.character)
  ) %>% 
  pivot_longer(
    cols = route1:route11,
    names_to = "route_number",
    values_to = "route_name"
  ) 
```

```{r}
a_stations <- clean_transit %>% 
  filter(route_name == "A") %>%  
  distinct(line, station_name) %>%  
  nrow()
```

There are `r a_stations` distinct stations that serve the A train

```{r}
a_ada_stations <- 
  clean_transit %>% 
  filter(route_name == "A" & ada == "TRUE") %>%  
  distinct(line, station_name) %>%  
  nrow()
```

There are `r a_ada_stations` stations that serve the a train and are ada accessible. 

# Problem 2 

```{r}
mr_trash_wheel_df <- read_excel("data_hw2/202309_Trash_Wheel_Collection_Data.xlsx", 
                                range = "A2:N586", sheet = "Mr. Trash Wheel") %>% 
  janitor::clean_names() %>% 
  select(
    -c("month", "year", "date", "homes_powered")
  ) %>% 
  mutate(
    sports_balls, sports_balls = as.integer(sports_balls)) %>% 
  mutate(trash_wheel = "Mr.")


prof_trash_wheel_df <- 
  read_excel("data_hw2/202309_Trash_Wheel_Collection_Data.xlsx", 
             range = "A2:M108", sheet = "Professor Trash Wheel") %>% 
  janitor::clean_names() %>% 
  select(
    -c("dumpster","month", "year", "date", "homes_powered")
  ) %>% 
  mutate(trash_wheel = "Professor")

gwynnda_df <- 
  read_excel("data_hw2/202309_Trash_Wheel_Collection_Data.xlsx", 
             range = "A2:L157", sheet = "Gwynnda Trash Wheel") %>% 
  janitor::clean_names() %>% 
  select(
    -c("dumpster","month", "year", "date", "homes_powered")) %>% 
  mutate(
    trash_wheel = "Gwynnda"
  )

trash_wheel_df <- 
  bind_rows(mr_trash_wheel_df, prof_trash_wheel_df,gwynnda_df) %>% 
  relocate(trash_wheel, .before = weight_tons)
```

## Problem 3 

```{r}
baker_df <- 
  read_csv("data_hw2/bakers.csv") %>% 
  janitor::clean_names()

bakes_df <- 
  read_csv("data_hw2/bakes.csv") %>%
  janitor::clean_names()

results_df <- 
  read_csv("data_hw2/viewers.csv") %>% 
  janitor::clean_names() 
```


